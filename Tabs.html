
<div class="banner">
    <br><br><br>
    <button type="action" name="act_attributes" >Attributes</button>
    <button type="action" name="act_attacks" >Attacks</button>
    <button type="action" name="act_abilities">Abilities</button>
    <button type="action" name="act_transformations">Transformations</button>
</div>
<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='attributes'  />
<br>
    <!--The attributes division that creates all of the attributes input for the players-->
<div class='attributes'>
    <div class ="character">
        <div class="info">
            <div class="attr-head">
                <h1>Character</h1>
                <div><label>Character name: <input name="attr_character_name" type="text" style="width:120px;" /></label></div>
                <div><label>Tier of Power <input name="attr_tier_of_power" type="text" value="@{hidden_power}" style="width: 30px;" disabled/></label></div>
                <input type="hidden" name="attr_hidden_power" value="1d0"/>
                <script type="text/worker">
                    on("change:power_level", function(){
                        getAttrs(["POWER_LEVEL"], function(values){
                            var powerlist = [5, 10, 15, 20, 25];
                            var dicelist = ["1d4", "1d6", "1d8", "1d10", "1d10+1d4"];
                            let pl = parseInt(values.POWER_LEVEL)||0;
                            var changed = false;
                            for(i=0;i<powerlist.length; i++){
                                if(powerlist[i]==pl){
                                    setAttrs({
                                        "hidden_power":dicelist[i]
                                    });
                                    changed=true;
                                };
                            };
                            if(!changed){
                                if(pl<5){
                                    setAttrs({
                                        "hidden_power":"0"
                                    });
                                };
                            };
                        });
                    });
                </script>
            </div>

            <div class="attr-top">
                <div><label>
                    Race:
                    <select name="attr_race" style="width:100px;">
                        <option value="android">Androids</option>
                        <option value="arcosian">Arcosians</option>
                        <option value="human">Earthling</option>
                        <option value="namekians">Namekians</option>
                        <option value="majin">Majin</option>
                        <option value="saiyan">Saiyan</option>
                    </select>
                    </label>
                </div>
                <div><label>Subrace:<input type="text" name="attr_subrace" style="width:100px;" value=""/></label></div>
                <script type="text/worker">
                    on("change:race", function(){
                        getAttrs(["RACE"], function(values){
                            var race = values.RACE;
                            if(race == "arcosian"){
                                setAttrs({
                                    "subrace":"Arcosian"
                                });
                            }else{
                                if(race == "android"){
                                    setAttrs({
                                        "subrace":"Artificial Construct, Cybernetic Organism, Bio-Engineered"
                                    });
                                }else{
                                    if(race == "human"){
                                        setAttrs({
                                            "subrace":"Earthling, Beast-men"
                                        });
                                    }else{
                                        if(race == "namekians"){
                                            setAttrs({
                                                "subrace":"Warrior, Priest"
                                            });
                                        }else{
                                            if(race == "majin"){
                                                setAttrs({
                                                    "subrace":"Majin"
                                                });
                                            }else{
                                                setAttrs({
                                                    "subrace":"Full Blood, Half-Blood"
                                                });
                                            };
                                        };
                                    };
                                };
                            };
                        });
                    });

                    on("change:subrace", function(){
                        getAttrs(["SUBRACE", "RACE"], function(values){
                            var subrace = values.SUBRACE;
                            var race = values.RACE;
                            if(subrace == "Majin"){
                                setAttrs({
                                    "hp_modifier":3
                                });
                                setAttrs({
                                    "agility":2
                                });
                                setAttrs({
                                    "insight":2
                                });
                                setAttrs({
                                    "personality":5
                                });
                                setAttrs({
                                    "potency":2
                                });
                                setAttrs({
                                    "scholarship":2
                                });
                                setAttrs({
                                    "spirit":5
                                });
                                setAttrs({
                                    "strength":2
                                });
                                setAttrs({
                                    "tenacity":4
                                });
                            }else if(subrace == "Arcosian"){
                                setAttrs({
                                    "hp_modifier":3
                                });
                                setAttrs({
                                    "agility":2
                                });
                                setAttrs({
                                    "insight":2
                                });
                                setAttrs({
                                    "personality":2
                                });
                                setAttrs({
                                    "potency":5
                                });
                                setAttrs({
                                    "scholarship":2
                                });
                                setAttrs({
                                    "spirit":5
                                });
                                setAttrs({
                                    "strength":2
                                });
                                setAttrs({
                                    "tenacity":4
                                });
                            }else if(race == "android"){
                                if(subrace == "Bio-Engineered"){
                                    setAttrs({
                                        "hp_modifier":5
                                    });
                                }else{
                                    setAttrs({
                                        "hp_modifier":4
                                    });
                                }
                                setAttrs({
                                    "agility":2
                                });
                                setAttrs({
                                    "insight":2
                                });
                                setAttrs({
                                    "personality":2
                                });
                                setAttrs({
                                    "potency":5
                                });
                                setAttrs({
                                    "scholarship":2
                                });
                                setAttrs({
                                    "spirit":2
                                });
                                setAttrs({
                                    "strength":2
                                });
                                setAttrs({
                                    "tenacity":5
                                });
                            }else if(race == "human"){
                                setAttrs({
                                    "hp_modifier":6
                                });
                            }else if(race == "namekians"){
                                setAttrs({
                                    "hp_modifier":4
                                });
                                setAttrs({
                                    "agility":2
                                });
                                setAttrs({
                                    "insight":5
                                });
                                setAttrs({
                                    "personality":2
                                });
                                setAttrs({
                                    "potency":2
                                });
                                setAttrs({
                                    "scholarship":2
                                });
                                setAttrs({
                                    "spirit":4
                                });
                                setAttrs({
                                    "strength":2
                                });
                                setAttrs({
                                    "tenacity":5
                                });
                            }else if(race == "saiyan"){
                                setAttrs({
                                    "hp_modifier":3
                                });
                                setAttrs({
                                    "agility":4
                                });
                                setAttrs({
                                    "insight":2
                                });
                                setAttrs({
                                    "personality":2
                                });
                                setAttrs({
                                    "potency":2
                                });
                                setAttrs({
                                    "scholarship":2
                                });
                                setAttrs({
                                    "spirit":2
                                });
                                setAttrs({
                                    "strength":5
                                });
                                setAttrs({
                                    "tenacity":5
                                });
                            }
                        });
                    });
                </script>
                <input type="hidden" name="attr_hp_modifier" value="0"/>
                <div><label>HP: <input type="number" name="attr_hp" value="0" /> / <input type="number" name="attr_hp_max" value="20"/><button class="skill" name="roll_health" type="roll" value="/r 1d10+@{hp_modifier}+@{tenacity_modifier}"></button></label></div>
                
                <div><label>Power Level: <input type="number" name="attr_power_level" value="1" /></label></div>
                <div><label>Initiative:  <input type="number" name="attr_init_mod" value="0" style="width:50px;"/><button class="skill" type="roll" value="/r 1d10!10+floor(@{agility}/2)+@{init_mod} &{tracker}"></button> </label></div>
            </div>
            
            <div class="attr-bot">
                <div><label>Ki Pool:  <input type="number" name="attr_ki" value="26" /> / <input type="number" name="attr_ki_max" value="26+12*(@{power_level}-1)" disabled="true" /> </label></div>
                <div><label>Capacity Rate: <input type="checkbox" name="attr_power_up" value="0.25"/>  <input type="number" name="attr_capacity" value="12"/> / <input type="number" name="attr_influx_max" value="12+8*(@{power_level}-1)+floor(@{power_up}*(12+8*(@{power_level}-1)))" disabled="true" /></label></div>
                <div><label>Zeni: <input type="number" name="attr_zeni" value="0"/></label></div>
                <div><label>XP: <input type="number" name="attr_xp" value = "0"/> </label></div>
                <div><label>TXP: <input type="number" name="attr_txp" value="0"/></label></div>
            </div>
        </div>

        <br>

        <div class="stats">
            <div class="all-stats">
                <div class="stat-agi">
                    <h3 class="j-h3">Agility</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_agility" value="2"/><button class="skill" type="roll" name="roll_agility" value="/r 1d10!10+@{agility_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{agility}/2)" name="attr_agility_modifier"> 
                    </div>
                </div>

                <div class="stat-ins">
                    <h3 class="j-h3">Insight</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_insight" value="2"/><button class="skill" type="roll" name="roll_insight" value="/r 1d10!10+@{insight_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{insight}/2)" name="attr_insight_modifier"> 
                    </div>
                </div>

                <div class="stat-per">
                    <h3 class="j-h3">Personality</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_personality" value="2"/><button class="skill" type="roll" name="roll_personality" value="/r 1d10!10+@{personality_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{personality}/2)" name="attr_personality_modifier"> 
                    </div>
                </div>

                <div class="stat-pot">
                    <h3 class="j-h3">Potency</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_potency" value="2"/><button class="skill" type="roll" name="roll_potency" value="/r 1d10!10+@{potency_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{potency}/2)" name="attr_potency_modifier"> 
                    </div>
                </div>

                <div class="stat-sch">
                    <h3 class="j-h3">Scholarship</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_scholarship" value="2"/><button class="skill" type="roll" name="roll_scholarship" value="/r 1d10!10+@{scholarship_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{scholarship}/2)" name="attr_scholarship_modifier"> 
                    </div>
                </div>

                <div class="stat-spi">
                    <h3 class="j-h3">Spirit</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_spirit" value="2"/><button class="skill" type="roll" name="roll_spirit" value="/r 1d10!10+@{spirit_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{spirit}/2)" name="attr_spirit_modifier"> 
                    </div>
                </div>

                <div class="stat-str">
                    <h3 class="j-h3">Strength</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_strength" value="2"/><button class="skill" type="roll" name="roll_strength" value="/r 1d10!10+@{strength_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{strength}/2)" name="attr_strength_modifier"> 
                    </div>
                </div>

                <div class="stat-ten">
                    <h3 class="j-h3">Tenacity</h3>
                    <div>
                        <label class="j-label">Score: <input type="number" name="attr_tenacity" value="2"/><button class="skill" type="roll" name="roll_tenacity" value="/r 1d10!10+@{tenacity_modifier}+@{hidden_power}"></button></label>
                        <input type="hidden" value="floor(@{tenacity}/2)" name="attr_tenacity_modifier"> 
                    </div>
                </div>
            </div>

            <div class="skill1">
                <div><label class="skill-label">Acrobatics (Agi): <input type="number" name="attr_acrobatics" value="0"/><button class="skill" type="roll" name="roll_agility" value="/r 1d10!10+@{agility_modifier}+@{acrobatics}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Athletics (Str): <input type="number" name="attr_athletics" value="0"/><button class="skill" type="roll" name="roll_strength" value="/r 1d10!10+@{strength_modifier}+@{athletics}+@{hidden_power}"></button></label></div>
                <div><label class="skill-label">Bluff (Per): <input type="number" name="attr_bluff" value="0"/><button class="skill" type="roll" name="roll_bluff" value="/r 1d10!10+@{personality_modifier}+@{bluff}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Clairvoyant (Spi): <input type="number" name="attr_clairvoyant" value="0"/><button class="skill" type="roll" name="roll_clairvoyant" value="/r 1d10!10+@{spirit_modifier}+@{clairvoyant}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Concealment (Agi): <input type="number" name="attr_concealment" value="0"/><button class="skill" type="roll" name="roll_concealment" value="/r 1d10!10+@{spirit_modifier}+@{concealment}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Craft (Sch): <input type="number" name="attr_craft" value="0"/><button class="skill" type="roll" name="roll_craft" value="/r 1d10!10+@{scholarship_modifier}+@{craft}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Creature Handling (Ins): <input type="number" name="attr_creature_handling" value="0"/><button class="skill" type="roll" name="roll_creature_handling" value="/r 1d10!10+@{insight_modifier}+@{creature_handling}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Intimidate (Per): <input type="number" name="attr_intimidate" value="0"/><button class="skill" type="roll" name="roll_intimidate" value="/r 1d10!10+@{personality_modifier}+@{intimidate}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Investigation (Sch): <input type="number" name="attr_investigation" value="0"/><button class="skill" type="roll" name="roll_investigation" value="/r 1d10!10+@{scholarship_modifier}+@{investigation}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Knowledge (Sch): <input type="number" name="attr_knowledge" value="0"/><button class="skill" type="roll" name="roll_knowledge" value="/r 1d10!10+@{scholarship_modifier}+@{knowledge}+@{hidden_power}"></label></div>
            </div>

            <div class="skill2">
                <div><label class="skill-label">Medicine (Sch): <input type="number" name="attr_medicine" value="0"/><button class="skill" type="roll" name="roll_medicine" value="/r 1d10!10+@{scholarship_modifier}+@{medicine}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Perception (Ins): <input type="number" name="attr_perception" value="0"/><button class="skill" type="roll" name="roll_perception" value="/r 1d10!10+@{insight_modifier}+@{perception}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Performance (Per): <input type="number" name="attr_performance" value="0"/><button class="skill" type="roll" name="roll_performance" value="/r 1d10!10+@{personality_modifier}+@{performance}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Persuasion (Per): <input type="number" name="attr_persuasion" value="0"/><button class="skill" type="roll" name="roll_persuasion" value="/r 1d10!10+@{personality_modifier}+@{persuasion}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Pilot (Agi): <input type="number" name="attr_pilot" value="0"/><button class="skill" type="roll" name="roll_pilot" value="/r 1d10!10+@{agility_modifier}+@{pilot}+@{hidden_power}"></button></label></div>
                <div><label class="skill-label">Profession (Sch): <input type="number" name="attr_profession" value="0"/><button class="skill" type="roll" name="roll_profession" value="/r 1d10!10+@{scholarship_modifier}+@{profession}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Science (Sch): <input type="number" name="attr_science" value="0"/><button class="skill" type="roll" name="roll_science" value="/r 1d10!10+@{scholarship_modifier}+@{science}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Stealth (Agi): <input type="number" name="attr_stealth" value="0"/><button class="skill" type="roll" name="roll_stealth" value="/r 1d10!10+@{agility_modifier}+@{stealth}+@{hidden_power}"></button></label></div>
                <div><label class="skill-label">Survival (Ins): <input type="number" name="attr_survival" value="0"/><button class="skill" type="roll" name="roll_survival" value="/r 1d10!10+@{insight_modifier}+@{survival}+@{hidden_power}"></label></div>
                <div><label class="skill-label">Thievery (Agi): <input type="number" name="attr_thievery" value="0"/><button class="skill" type="roll" name="roll_thievery" value="/r 1d10!10+@{agility_modifier}+@{thievery}+@{hidden_power}"></button></label></div>
                <div><label class="skill-label">Use Magic (Spi): <input type="number" name="attr_use_magic" value="0"/><button class="skill" type="roll" name="roll_use_magic" value="/r 1d10!10+@{spirit_modifier}+@{use_nagic}+@{hidden_power}"></label></div>
            </div>
            
        </div>
    </div>
</div>




    <div class='attacks'>
        <h1 style="color: rgb(185, 102, 0);">Attacks</h1>
        <h2 style="color: rgb(185, 102, 0);">Technique Points <input type="number" name="attr_technique_points" value="0"/></h2>
        <div class="basic-attack">
            <div class="basic-attacks-col1">
                <h2 style="color: rgb(202, 111, 0); border: 1px solid rgb(156, 155, 155);">Name:</h2>
                <div class="basic-attacks-row"><input type="text" value="Basic Physical" style="width: 100px;" disabled> <button class="attack-button" type="roll" name="roll_basic_physical" value="/em swings a kick at the enemy for [[@{basic_physical_hit}d10+@{hidden_power}+@{agility_modifier}+@{insight_modifier}]], dealing [[@{basic_physical_wound}d10+@{strength_modifier}+@{hidden_power}]]"></button></div>
            </div>
            <div class="basic-attacks-col2">
                <h2 style="color: rgb(202, 111, 0); border: 1px solid rgb(156, 155, 155);">To Hit Die:</h2>
                <div class="basic-attacks-row"><input type="number" value="1" name="attr_basic_physical_hit"></div>
            </div>
            <div class="basic-attacks-col3">
                <h2 style="color: rgb(202, 111, 0); border: 1px solid rgb(156, 155, 155);">To Wound Die:</h2>
                <div class="basic-attacks-row"><input type="number" value="1" name="attr_basic_physical_wound"></div>
            </div>
            <div class="basic-attacks-col4">
                <h2 style="color:rgb(202, 111, 0); border: 1px solid rgb(156, 155, 155); ">Ki Cost:</h2>
                <div class="basic-attacks-row"><input type="number" value="1" name="attr_basic_physical_ki"></div>
            </div>
        </div>
        <div class="custom">

        </div>
    </div>

    <div class='abilities'>
        <h1>GALIC GUN</h1>
        <h2>Journal/Notes</h2>
        <span>Journal/Notes Stuff Goes here</span> 
    </div>

    <div class='transformations'>
        <h1>SPECIAL BEAM CANNON</h1>
        <h2>Journal/Notes</h2>
        <span>Journal/Notes Stuff Goes here</span> 
    </div>


    <script type="text/worker">
        const buttonlist = ["attributes","attacks","abilities","transformations"];
        buttonlist.forEach(button => {
            on(`clicked:${button}`, function() {
                setAttrs({
                    sheetTab: button
                });
            });
        });
    </script>
</div>